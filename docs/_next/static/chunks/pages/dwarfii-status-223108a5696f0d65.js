(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{1455:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dwarfii-status",function(){return n(6346)}])},4987:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var o=n(5893),i=n(7294),r=n(7522),s=n(5544);function l(){let t=(0,i.useContext)(r.hg),e=t.connectionStatus?(0,o.jsx)("i",{className:"bi bi-check-circle",style:{color:"green"}}):(0,o.jsx)("i",{className:"bi bi-x-circle",style:{color:"red"}}),n=t.connectionStatusStellarium?(0,o.jsx)("i",{className:"bi bi-check-circle",style:{color:"green"}}):(0,o.jsx)("i",{className:"bi bi-x-circle",style:{color:"red"}});return(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("span",{className:"me-3",children:["Dwarf II: ",e]}),(0,o.jsxs)("span",{className:"me-3",children:["Stellarium: ",n]}),void 0!==t.astroSettings.gain&&(0,o.jsxs)("span",{className:"me-3",children:["Gain: ",t.astroSettings.gain]}),void 0!==t.astroSettings.exposure&&(0,o.jsxs)("span",{className:"me-3",children:["Exp: ",t.astroSettings.exposure]}),void 0!==t.astroSettings.IR&&(0,o.jsxs)("span",{className:"me-3",children:["IR: ",t.astroSettings.IR===s.zC?"Cut":"Pass"]}),void 0!==t.astroSettings.binning&&(0,o.jsxs)("span",{className:"me-3",children:["Bin: ",0==t.astroSettings.binning?"1x1":"2x2"]}),void 0!==t.astroSettings.count&&(0,o.jsxs)("span",{className:"me-3",children:["Count: ",t.astroSettings.count]}),Object.keys(t.imagingSession).length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{className:"me-3",children:["Taken: ",t.imagingSession.imagesTaken]}),(0,o.jsxs)("span",{className:"me-3",children:["Time: ",t.imagingSession.sessionElaspsedTime]})]})]})}},2526:function(t,e,n){"use strict";function o(t){localStorage.setItem("latitude",t.toString())}function i(t){localStorage.setItem("longitude",t.toString())}function r(){let t=localStorage.getItem("latitude"),e=localStorage.getItem("longitude");return"string"==typeof t&&"string"==typeof e?{latitude:Number(t),longitude:Number(e)}:{}}function s(t){localStorage.setItem("connectionStatus",t?"true":"false")}function l(){let t=localStorage.getItem("connectionStatus");if(t)return"true"===t}function a(){localStorage.setItem("initialConnectionTime",Date.now().toString())}function c(){let t=localStorage.getItem("initialConnectionTime");if(t)return Number(t)}function u(t){localStorage.setItem("IPDwarf",t)}function g(){let t=localStorage.getItem("IPDwarf");if(t)return t}function f(t){localStorage.setItem("connectionStatusStellarium",t?"true":"false")}function m(){let t=localStorage.getItem("connectionStatusStellarium");if(t)return"true"===t}function S(t){localStorage.setItem("IPStellarium",t)}function d(){let t=localStorage.getItem("IPStellarium");if(t)return t}function I(t){localStorage.setItem("portStellarium",t.toString())}function v(){let t=localStorage.getItem("portStellarium");if(t)return Number(t)}function h(t){localStorage.setItem("urlStellarium",t)}function N(){let t=localStorage.getItem("urlStellarium");if(t)return t}function b(t){localStorage.setItem("objectListsNames",t)}function p(){let t=localStorage.getItem("objectListsNames");if(t){let e=t.split("|");return e.sort(),e}}function j(t){localStorage.setItem("objectLists",t)}function x(){let t=localStorage.getItem("objectLists");if(t)return JSON.parse(t)}function w(t){localStorage.setItem("currentObjectListName",t)}function C(){let t=localStorage.getItem("currentObjectListName");if(t)return t}function L(t){localStorage.setItem("currentUserObjectListName",t)}function O(){let t=localStorage.getItem("currentUserObjectListName");if(t)return t}function E(){let t=localStorage.getItem("astroSettings");if(t){let e=JSON.parse(t);return["IR","binning","count","exposure","exposureMode","fileFormat","gain","gainMode"].forEach(t=>{void 0!==e[t]&&/^\d+$/.test(e[t])&&(e[t]=Number(e[t]))}),e}}function y(t,e){let n=localStorage.getItem("astroSettings");if(n){let o=JSON.parse(n);void 0===e?delete o[t]:o[t]=e,localStorage.setItem("astroSettings",JSON.stringify(o))}else localStorage.setItem("astroSettings",JSON.stringify({[t]:e}))}function P(){let t=localStorage.getItem("imagingSession");if(t){let e=JSON.parse(t);return["startTime","imagesTaken"].forEach(t=>{void 0!==e[t]&&(e[t]=Number(e[t]))}),e}}function k(t,e){let n=localStorage.getItem("imagingSession");if(n){let o=JSON.parse(n);void 0===e?delete o[t]:o[t]=e,localStorage.setItem("imagingSession",JSON.stringify(o))}else localStorage.setItem("imagingSession",JSON.stringify({[t]:e}))}function T(){localStorage.removeItem("imagingSession")}function D(){let t=localStorage.getItem("loggerStatus");if(t)return"true"===t}function J(t){localStorage.setItem("loggerStatus",t)}function _(){let t=localStorage.getItem("logMessages");if(t)return JSON.parse(t)}function F(t){let e=_();e?(e.push(t),localStorage.setItem("logMessages",JSON.stringify(e))):localStorage.setItem("logMessages",JSON.stringify([t]))}function M(){localStorage.removeItem("logMessages")}n.d(e,{$W:function(){return E},Bk:function(){return d},DE:function(){return P},ER:function(){return x},Fs:function(){return c},G0:function(){return M},GL:function(){return a},Gj:function(){return J},L2:function(){return v},M8:function(){return F},Nj:function(){return T},Tq:function(){return j},V6:function(){return w},Y8:function(){return m},Y_:function(){return f},Yc:function(){return l},db:function(){return g},j2:function(){return O},lW:function(){return C},m1:function(){return p},mo:function(){return k},nV:function(){return y},n_:function(){return L},nj:function(){return I},og:function(){return u},on:function(){return r},oy:function(){return o},q$:function(){return _},qz:function(){return S},tM:function(){return N},vv:function(){return b},wz:function(){return s},yH:function(){return D},z4:function(){return i},zn:function(){return h}})},5961:function(t,e,n){"use strict";n.d(e,{i:function(){return s}});var o=n(7294),i=n(7522),r=n(2526);function s(){let t=(0,o.useContext)(i.hg);(0,o.useEffect)(()=>{if(void 0===t.connectionStatus){let e=(0,r.Yc)();void 0!==e&&t.setConnectionStatus(e)}if(void 0===t.connectionStatusStellarium){let e=(0,r.Y8)();void 0!==e&&t.setConnectionStatusStellarium(e)}if(void 0===t.latitude){let e=(0,r.on)();e.latitude&&(t.setLatitude(e.latitude),t.setLongitude(e.longitude))}if(void 0===t.initialConnectionTime){let e=(0,r.Fs)();void 0!==e&&t.setInitialConnectionTime(e)}if(void 0===t.IPDwarf){let e=(0,r.db)();void 0!==e&&t.setIPDwarf(e)}if(void 0===t.connectionStatusStellarium){let e=(0,r.Y8)();void 0!==e&&t.setConnectionStatusStellarium(e)}if(void 0===t.IPStellarium){let e=(0,r.Bk)();void 0!==e&&t.setIPStellarium(e)}if(void 0===t.portStellarium){let e=(0,r.L2)();void 0!==e&&t.setPortStellarium(e)}if(void 0===t.urlStellarium){let e=(0,r.tM)();void 0!==e&&t.setUrlStellarium(e)}if(void 0===t.currentObjectListName){let e=(0,r.lW)();void 0!==e&&t.setCurrentObjectListName(e)}if(void 0===t.currentUserObjectListName){let e=(0,r.j2)();void 0!==e&&t.setUserCurrentObjectListName(e)}if(void 0===t.astroSettings.gain){let e=(0,r.$W)();void 0!==e&&t.setAstroSettings(e)}if(void 0===t.imagingSession.startTime){let e=(0,r.DE)();void 0!==e&&t.setImagingSession(e)}if(void 0===t.loggerStatus){let e=(0,r.yH)();void 0!==e&&t.setLoggerStatus(e)}if(void 0===t.logger){let e=(0,r.q$)();void 0!==e&&t.setLogger(e)}},[])}},5124:function(t,e,n){"use strict";n.d(e,{s:function(){return l}});var o=n(7294),i=n(7522),r=n(2526),s=n(5544);function l(){let t=(0,o.useContext)(i.hg);(0,o.useEffect)(()=>{let e,n;return t.connectionStatus&&(a(t,e,!1),e=setInterval(()=>{a(t,e,!0)},9e4)),t.connectionStatusStellarium&&(c(t,n,!1),n=setInterval(()=>{c(t,n,!0)},9e4)),()=>{!1===t.connectionStatus&&(console.log("unmount: delete checkDwarfConnection timer"),clearInterval(e)),!1===t.connectionStatusStellarium&&(console.log("unmount: delete checkStellariumConnection timer"),clearInterval(n))}},[])}function a(t,e,n){void 0!==t.IPDwarf&&fetch((0,s.Cz)(t.IPDwarf),{signal:AbortSignal.timeout(2e3),mode:"no-cors"}).then(()=>{console.log("Dwarf connection ok.",n?" (loop)":""),t.connectionStatus||(t.setConnectionStatus(!0),(0,r.wz)(!0),(0,r.GL)())}).catch(n=>{"AbortError"===n.name||"Failed to fetch"==n.message?(console.log("Dwarf connection error"),clearInterval(e),t.setConnectionStatus(!1),(0,r.wz)(!1)):console.log("checkDwarfConnection err ???",n.name,n.message)})}function c(t,e,n){if(void 0===t.IPStellarium)return;let o="http://".concat(t.IPStellarium,":").concat(t.portStellarium);fetch(o,{signal:AbortSignal.timeout(2e3)}).then(()=>{console.log("Stellarium connection ok.",n?" (loop)":""),t.connectionStatusStellarium||(t.setConnectionStatusStellarium(!0),(0,r.Y_)(!0))}).catch(n=>{"AbortError"===n.name||"Load failed"===n.message||"Failed to fetch"===n.message?(console.log("Stellarium connection error"),clearInterval(e),t.setConnectionStatusStellarium(!1),(0,r.Y_)(!1)):console.log("checkStellariumConnection err >>>",n.name,n.message)})}},6346:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var o=n(5893),i=n(7294),r=n(5544),s=n(7522);function l(){let t=(0,i.useContext)(s.hg),[e,n]=(0,i.useState)(null),[l,a]=(0,i.useState)(null),c=()=>{if(void 0==t.IPDwarf)return;let e=new WebSocket((0,r.nN)(t.IPDwarf));e.addEventListener("open",()=>{console.log("start cameraSettings...");let t=(0,r.B3)();(0,r.eh)(e,t)}),e.addEventListener("message",t=>{let e=JSON.parse(t.data);e.interface===r.L9||e.interface===r.vp?(console.log("cameraSettings:",e),n(e)):console.log(e)}),e.addEventListener("error",t=>{console.log("cameraSettings error:",t)})},u=()=>{if(void 0==t.IPDwarf)return;let e=new WebSocket((0,r.nN)(t.IPDwarf));e.addEventListener("open",()=>{console.log("start queryShotField...");let n=(0,r.bA)(t.astroSettings.binning||r.KU);(0,r.eh)(e,n)}),e.addEventListener("message",t=>{let e=JSON.parse(t.data);e.interface===r.Ts?(a(e),console.log("queryShotField:",e)):console.log(e)}),e.addEventListener("error",t=>{a(t),console.log("queryShotField error:",t)})};return(0,i.useEffect)(()=>{c(),setTimeout(()=>{u()},1e3)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{children:"ISP Parameters - Telephoto"}),e&&(0,o.jsx)("pre",{children:JSON.stringify(e,null,2)}),(0,o.jsx)("h2",{children:"Shot Field - Telephoto"}),l&&(0,o.jsx)("pre",{children:JSON.stringify(l,null,2)}),(0,o.jsx)("button",{className:" btn btn-primary mb-3",onClick:()=>{c(),setTimeout(()=>{u()},1e3)},children:"Refresh"})]})}var a=n(4987),c=n(5124),u=n(5961);function g(){return(0,c.s)(),(0,u.i)(),(0,o.jsxs)("div",{children:[(0,o.jsx)(a.Z,{}),(0,o.jsx)(l,{})]})}}},function(t){t.O(0,[544,774,888,179],function(){return t(t.s=1455)}),_N_E=t.O()}]);