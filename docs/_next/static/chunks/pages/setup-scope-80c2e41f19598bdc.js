(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{635:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setup-scope",function(){return n(107)}])},4987:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(5893),i=n(7294),r=n(7522),s=n(5544);function l(){let e=(0,i.useContext)(r.hg),t=e.connectionStatus?(0,o.jsx)("i",{className:"bi bi-check-circle",style:{color:"green"}}):(0,o.jsx)("i",{className:"bi bi-x-circle",style:{color:"red"}}),n=e.connectionStatusStellarium?(0,o.jsx)("i",{className:"bi bi-check-circle",style:{color:"green"}}):(0,o.jsx)("i",{className:"bi bi-x-circle",style:{color:"red"}});return(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("span",{className:"me-3",children:["Dwarf II: ",t]}),(0,o.jsxs)("span",{className:"me-3",children:["Stellarium: ",n]}),void 0!==e.astroSettings.gain&&(0,o.jsxs)("span",{className:"me-3",children:["Gain: ",e.astroSettings.gain]}),void 0!==e.astroSettings.exposure&&(0,o.jsxs)("span",{className:"me-3",children:["Exp: ",e.astroSettings.exposure]}),void 0!==e.astroSettings.IR&&(0,o.jsxs)("span",{className:"me-3",children:["IR: ",e.astroSettings.IR===s.zC?"Cut":"Pass"]}),void 0!==e.astroSettings.binning&&(0,o.jsxs)("span",{className:"me-3",children:["Bin: ",0==e.astroSettings.binning?"1x1":"2x2"]}),void 0!==e.astroSettings.count&&(0,o.jsxs)("span",{className:"me-3",children:["Count: ",e.astroSettings.count]}),Object.keys(e.imagingSession).length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{className:"me-3",children:["Taken: ",e.imagingSession.imagesTaken]}),(0,o.jsxs)("span",{className:"me-3",children:["Time: ",e.imagingSession.sessionElaspsedTime]})]})]})}},2526:function(e,t,n){"use strict";function o(e){localStorage.setItem("latitude",e.toString())}function i(e){localStorage.setItem("longitude",e.toString())}function r(){let e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude");return"string"==typeof e&&"string"==typeof t?{latitude:Number(e),longitude:Number(t)}:{}}function s(e){localStorage.setItem("connectionStatus",e?"true":"false")}function l(){let e=localStorage.getItem("connectionStatus");if(e)return"true"===e}function a(){localStorage.setItem("initialConnectionTime",Date.now().toString())}function c(){let e=localStorage.getItem("initialConnectionTime");if(e)return Number(e)}function u(e){localStorage.setItem("IPDwarf",e)}function m(){let e=localStorage.getItem("IPDwarf");if(e)return e}function d(e){localStorage.setItem("connectionStatusStellarium",e?"true":"false")}function g(){let e=localStorage.getItem("connectionStatusStellarium");if(e)return"true"===e}function f(e){localStorage.setItem("IPStellarium",e)}function S(){let e=localStorage.getItem("IPStellarium");if(e)return e}function h(e){localStorage.setItem("portStellarium",e.toString())}function x(){let e=localStorage.getItem("portStellarium");if(e)return Number(e)}function I(e){localStorage.setItem("urlStellarium",e)}function v(){let e=localStorage.getItem("urlStellarium");if(e)return e}function j(e){localStorage.setItem("objectListsNames",e)}function p(){let e=localStorage.getItem("objectListsNames");if(e){let t=e.split("|");return t.sort(),t}}function N(e){localStorage.setItem("objectLists",e)}function b(){let e=localStorage.getItem("objectLists");if(e)return JSON.parse(e)}function w(e){localStorage.setItem("currentObjectListName",e)}function C(){let e=localStorage.getItem("currentObjectListName");if(e)return e}function k(e){localStorage.setItem("currentUserObjectListName",e)}function L(){let e=localStorage.getItem("currentUserObjectListName");if(e)return e}function D(){let e=localStorage.getItem("astroSettings");if(e){let t=JSON.parse(e);return["IR","binning","count","exposure","exposureMode","fileFormat","gain","gainMode"].forEach(e=>{void 0!==t[e]&&/^\d+$/.test(t[e])&&(t[e]=Number(t[e]))}),t}}function y(e,t){let n=localStorage.getItem("astroSettings");if(n){let o=JSON.parse(n);void 0===t?delete o[e]:o[e]=t,localStorage.setItem("astroSettings",JSON.stringify(o))}else localStorage.setItem("astroSettings",JSON.stringify({[e]:t}))}function P(){let e=localStorage.getItem("imagingSession");if(e){let t=JSON.parse(e);return["startTime","imagesTaken"].forEach(e=>{void 0!==t[e]&&(t[e]=Number(t[e]))}),t}}function O(e,t){let n=localStorage.getItem("imagingSession");if(n){let o=JSON.parse(n);void 0===t?delete o[e]:o[e]=t,localStorage.setItem("imagingSession",JSON.stringify(o))}else localStorage.setItem("imagingSession",JSON.stringify({[e]:t}))}function T(){localStorage.removeItem("imagingSession")}function E(){let e=localStorage.getItem("loggerStatus");if(e)return"true"===e}function _(e){localStorage.setItem("loggerStatus",e)}function F(){let e=localStorage.getItem("logMessages");if(e)return JSON.parse(e)}function z(e){let t=F();t?(t.push(e),localStorage.setItem("logMessages",JSON.stringify(t))):localStorage.setItem("logMessages",JSON.stringify([e]))}function J(){localStorage.removeItem("logMessages")}n.d(t,{$W:function(){return D},Bk:function(){return S},DE:function(){return P},ER:function(){return b},Fs:function(){return c},G0:function(){return J},GL:function(){return a},Gj:function(){return _},L2:function(){return x},M8:function(){return z},Nj:function(){return T},Tq:function(){return N},V6:function(){return w},Y8:function(){return g},Y_:function(){return d},Yc:function(){return l},db:function(){return m},j2:function(){return L},lW:function(){return C},m1:function(){return p},mo:function(){return O},nV:function(){return y},n_:function(){return k},nj:function(){return h},og:function(){return u},on:function(){return r},oy:function(){return o},q$:function(){return F},qz:function(){return f},tM:function(){return v},vv:function(){return j},wz:function(){return s},yH:function(){return E},z4:function(){return i},zn:function(){return I}})},5961:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var o=n(7294),i=n(7522),r=n(2526);function s(){let e=(0,o.useContext)(i.hg);(0,o.useEffect)(()=>{if(void 0===e.connectionStatus){let t=(0,r.Yc)();void 0!==t&&e.setConnectionStatus(t)}if(void 0===e.connectionStatusStellarium){let t=(0,r.Y8)();void 0!==t&&e.setConnectionStatusStellarium(t)}if(void 0===e.latitude){let t=(0,r.on)();t.latitude&&(e.setLatitude(t.latitude),e.setLongitude(t.longitude))}if(void 0===e.initialConnectionTime){let t=(0,r.Fs)();void 0!==t&&e.setInitialConnectionTime(t)}if(void 0===e.IPDwarf){let t=(0,r.db)();void 0!==t&&e.setIPDwarf(t)}if(void 0===e.connectionStatusStellarium){let t=(0,r.Y8)();void 0!==t&&e.setConnectionStatusStellarium(t)}if(void 0===e.IPStellarium){let t=(0,r.Bk)();void 0!==t&&e.setIPStellarium(t)}if(void 0===e.portStellarium){let t=(0,r.L2)();void 0!==t&&e.setPortStellarium(t)}if(void 0===e.urlStellarium){let t=(0,r.tM)();void 0!==t&&e.setUrlStellarium(t)}if(void 0===e.currentObjectListName){let t=(0,r.lW)();void 0!==t&&e.setCurrentObjectListName(t)}if(void 0===e.currentUserObjectListName){let t=(0,r.j2)();void 0!==t&&e.setUserCurrentObjectListName(t)}if(void 0===e.astroSettings.gain){let t=(0,r.$W)();void 0!==t&&e.setAstroSettings(t)}if(void 0===e.imagingSession.startTime){let t=(0,r.DE)();void 0!==t&&e.setImagingSession(t)}if(void 0===e.loggerStatus){let t=(0,r.yH)();void 0!==t&&e.setLoggerStatus(t)}if(void 0===e.logger){let t=(0,r.q$)();void 0!==t&&e.setLogger(t)}},[])}},5124:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var o=n(7294),i=n(7522),r=n(2526),s=n(5544);function l(){let e=(0,o.useContext)(i.hg);(0,o.useEffect)(()=>{let t,n;return e.connectionStatus&&(a(e,t,!1),t=setInterval(()=>{a(e,t,!0)},9e4)),e.connectionStatusStellarium&&(c(e,n,!1),n=setInterval(()=>{c(e,n,!0)},9e4)),()=>{!1===e.connectionStatus&&(console.log("unmount: delete checkDwarfConnection timer"),clearInterval(t)),!1===e.connectionStatusStellarium&&(console.log("unmount: delete checkStellariumConnection timer"),clearInterval(n))}},[])}function a(e,t,n){void 0!==e.IPDwarf&&fetch((0,s.Cz)(e.IPDwarf),{signal:AbortSignal.timeout(2e3),mode:"no-cors"}).then(()=>{console.log("Dwarf connection ok.",n?" (loop)":""),e.connectionStatus||(e.setConnectionStatus(!0),(0,r.wz)(!0),(0,r.GL)())}).catch(n=>{"AbortError"===n.name||"Failed to fetch"==n.message?(console.log("Dwarf connection error"),clearInterval(t),e.setConnectionStatus(!1),(0,r.wz)(!1)):console.log("checkDwarfConnection err ???",n.name,n.message)})}function c(e,t,n){if(void 0===e.IPStellarium)return;let o="http://".concat(e.IPStellarium,":").concat(e.portStellarium);fetch(o,{signal:AbortSignal.timeout(2e3)}).then(()=>{console.log("Stellarium connection ok.",n?" (loop)":""),e.connectionStatusStellarium||(e.setConnectionStatusStellarium(!0),(0,r.Y_)(!0))}).catch(n=>{"AbortError"===n.name||"Load failed"===n.message||"Failed to fetch"===n.message?(console.log("Stellarium connection error"),clearInterval(t),e.setConnectionStatusStellarium(!1),(0,r.Y_)(!1)):console.log("checkStellariumConnection err >>>",n.name,n.message)})}},6345:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var o=n(2526);function i(e,t,n){console.log(e,t),n.loggerStatus&&(n.setLogger(e=>null==e?void 0:e.concat(t)),(0,o.M8)(t))}},107:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var o=n(5893),i=n(7294),r=n(5544),s=n(7522),l=n(2526),a=n(6345);function c(){let e=(0,i.useContext)(s.hg),[t,n]=(0,i.useState)(!1);return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"Connect to Dwarf II"}),(0,o.jsx)("p",{children:"In order for this site to connect to the Dwarf II, both the Dwarf II and the website must use the same wifi network."}),(0,o.jsxs)("ol",{children:[(0,o.jsx)("li",{className:"mb-2",children:"Use the Dwarf II mobile app to connect to the telescope. You can use the Dwarf wifi or set the Dwarf II to STA mode and use your normal wifi network."}),(0,o.jsx)("li",{className:"mb-2",children:"Visit this site on a device that is connected to the same wifi network as the Dwarf II."}),(0,o.jsx)("li",{className:"mb-2",children:"Enter in IP for the Dwarf II. If you are using Dwarf wifi, the IP is 192.168.88.1. If you are using STA mode, use the IP for your wifi network."}),(0,o.jsx)("li",{className:"mb-2",children:"Click Connect. This site will try to connect to Dwarf II."}),(0,o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n(!0);let o=new FormData(t.currentTarget),i=o.get("ip"),s=null==i?void 0:i.toString();if(void 0==s)return;n(!0),e.setIPDwarf(s),(0,l.og)(s);let c=new WebSocket((0,r.nN)(s));c.addEventListener("open",()=>{let t=(0,r.B3)();(0,a.k)("start cameraSettings...",t,e),(0,r.eh)(c,t)});let u=setTimeout(()=>{n(!1),e.setConnectionStatus(!1),(0,l.wz)(!1),c.close()},3e3);c.addEventListener("message",t=>{clearTimeout(u),n(!1);let o=JSON.parse(t.data);o.interface===r.L9||o.interface===r.vp?((0,a.k)("cameraSettings:",o,e),e.setConnectionStatus(!0),e.setInitialConnectionTime(Date.now()),(0,l.wz)(!0),(0,l.GL)()):(0,a.k)("",o,e)}),c.addEventListener("error",t=>{(0,a.k)("cameraSettings error:",t,e),clearTimeout(u),n(!1),e.setConnectionStatus(!1),(0,l.wz)(!1)})},className:"mb-3",children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-md-1",children:(0,o.jsx)("label",{htmlFor:"ip",className:"form-label",children:"IP"})}),(0,o.jsx)("div",{className:"col-md-11",children:(0,o.jsx)("input",{className:"form-control",id:"ip",name:"ip",placeholder:"127.00.00.00",required:!0,defaultValue:e.IPDwarf})})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary me-3",children:"Connect"})," ",t?(0,o.jsx)("span",{children:"Connecting..."}):void 0===e.connectionStatus?(0,o.jsx)(o.Fragment,{}):!1===e.connectionStatus?(0,o.jsx)("span",{className:"text-danger",children:"Connection failed."}):(0,o.jsx)("span",{className:"text-success",children:"Connection successful."})]}),(0,o.jsx)("li",{className:"mb-2",children:"Use the Dwarf II mobile app from Dwarf Labs to focus the scope, calibrate the goto, and set gain, exposure, and IR."})]})]})}var u=n(1664),m=n.n(u);function d(){let e=(0,i.useContext)(s.hg),[t,n]=(0,i.useState)(!1);return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"Connect to Stellarium"}),(0,o.jsx)("p",{children:"In order to get right acension and declination from Stellarium, we need to setup up the Remote Control plugin."}),(0,o.jsxs)("ol",{children:[(0,o.jsx)("li",{className:"mb-2",children:"Start Stellarium."}),(0,o.jsxs)("li",{className:"mb-2",children:["The beginning of this"," ",(0,o.jsx)(m(),{href:"https://www.youtube.com/watch?v=v2gROUlPRhw",children:"Youtube video"})," ",'demostrates setting up Stellarium\'s Remote Control plugin (0 to 1:40); skip the part about NINA. Click "Enable CORS for the following origin" and enter in "*".']}),(0,o.jsx)("li",{className:"mb-2",children:'Enter in IP and port for the Remote Control plugin, and click "Connect". This site will try to connect to Stellarium.'})]}),(0,o.jsxs)("form",{onSubmit:function(t){t.preventDefault();let o=new FormData(t.currentTarget),i=o.get("ip"),r=o.get("port");if(i&&r){n(!0);let t="http://".concat(i,":").concat(r);e.setIPStellarium(i.toString()),e.setPortStellarium(Number(r)),e.setUrlStellarium(t),(0,l.qz)(i.toString()),(0,l.nj)(Number(r)),(0,l.zn)(t),fetch(t,{signal:AbortSignal.timeout(2e3)}).then(()=>{n(!1),e.setConnectionStatusStellarium(!0),(0,l.Y_)(!0)}).catch(t=>{console.log("Stellarium connection error:",t),n(!1),e.setConnectionStatusStellarium(!1),(0,l.Y_)(!1)})}},children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-md-1",children:(0,o.jsx)("label",{htmlFor:"ip",className:"form-label",children:"IP"})}),(0,o.jsx)("div",{className:"col-md-11",children:(0,o.jsx)("input",{className:"form-control",id:"ip",name:"ip",placeholder:"127.00.00.00",required:!0,defaultValue:e.IPStellarium})})]}),(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-md-1",children:(0,o.jsx)("label",{htmlFor:"port",className:"form-label",children:"Port"})}),(0,o.jsx)("div",{className:"col-md-11",children:(0,o.jsx)("input",{className:"form-control",id:"port",name:"port",placeholder:"8000",required:!0,defaultValue:e.portStellarium})})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary me-3",children:"Connect"})," ",t?(0,o.jsx)("span",{children:"Connecting..."}):void 0===e.connectionStatusStellarium?(0,o.jsx)(o.Fragment,{}):!1===e.connectionStatusStellarium?(0,o.jsx)("span",{className:"text-danger",children:"Connection failed."}):(0,o.jsx)("span",{className:"text-success",children:"Connection successful."})]})]})}let g={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function f(){let e=(0,i.useContext)(s.hg),[t,n]=(0,i.useState)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{children:"Set Location"}),(0,o.jsx)("p",{children:"In order for goto to work, this site needs your latitude and longitude."}),(0,o.jsxs)("form",{children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-lg-1 col-md-2",children:(0,o.jsx)("label",{htmlFor:"latitude",className:"form-label",children:"Latitude"})}),(0,o.jsx)("div",{className:"col-lg-11 col-md-10",children:(0,o.jsx)("input",{pattern:"^-?\\d*(\\.\\d+)?$",className:"form-control",id:"latitude",name:"latitude",placeholder:"-12.3456",required:!0,value:e.latitude||"",onChange:t=>{let o;return n(void 0),void(""!==(o=t.target.value.trim())&&/^-?\d*(\.\d+)?$/.test(o)&&((0,l.oy)(Number(o)),e.setLatitude(Number(o))))}})})]}),(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-lg-1 col-md-2",children:(0,o.jsx)("label",{htmlFor:"longitude",className:"form-label",children:"Longitude"})}),(0,o.jsx)("div",{className:"col-lg-11 col-md-10",children:(0,o.jsx)("input",{pattern:"^-?\\d*(\\.\\d+)?$",className:"form-control",id:"longitude",name:"longitude",placeholder:"56.7890",required:!0,value:e.longitude||"",onChange:t=>{let o;return n(void 0),void(""!==(o=t.target.value.trim())&&/^-?\d*(\.\d+)?$/.test(o)&&((0,l.z4)(Number(o)),e.setLongitude(Number(o))))}})})]})]}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:function(){var t,o;(0,a.k)("start getCoordinates...",{},e),n(void 0),t=t=>{let n=t.coords;(0,a.k)("getCoordinates:",n,e),(0,l.oy)(n.latitude),(0,l.z4)(n.longitude),e.setLatitude(n.latitude),e.setLongitude(n.longitude)},o=t=>{(0,a.k)("getCoordinates err:",t,e),n("Could not detect location.")},navigator.geolocation.getCurrentPosition(t,o,g)},children:"Use Current Location"}),t&&(0,o.jsx)("p",{className:"text-danger",children:t})]})}var S=n(5124),h=n(4987),x=n(5961);function I(){return(0,S.s)(),(0,x.i)(),(0,o.jsxs)("div",{children:[(0,o.jsx)(h.Z,{}),(0,o.jsx)(f,{}),(0,o.jsx)("hr",{}),(0,o.jsx)(c,{}),(0,o.jsx)("hr",{}),(0,o.jsx)(d,{})]})}}},function(e){e.O(0,[544,774,888,179],function(){return e(e.s=635)}),_N_E=e.O()}]);